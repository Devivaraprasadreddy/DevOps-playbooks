Install docker on aws ec2 machine using ansible controller 

--- 

- name: Install Docker 

hosts: all 

become: yes 

tasks: 

- name: Update apt package index 

apt: 

update_cache: yes 

 

- name: Install packages to allow apt to use a repository over HTTPS 

apt: 

name: 

- apt-transport-https 

- ca-certificates 

- curl 

- software-properties-common 

state: present 

 

- name: Add Dockerâ€™s official GPG key 

apt_key: 

url: https://download.docker.com/linux/ubuntu/gpg 

state: present 

 

- name: Set up the Docker stable repository 

apt_repository: 

repo: deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable 

state: present 

 

- name: Update apt package index again 

apt: 

update_cache: yes 

 

- name: Install Docker 

apt: 

name: docker-ce 

state: present 

 

- name: Ensure Docker service is running 

service: 

name: docker 

state: started 

enabled: yes 
